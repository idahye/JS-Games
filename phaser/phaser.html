<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Cat Catcher (phaser.io)</title>
<script src="phaser/phaser.min.js"></script>
<script>
// initializing a new Phaser game:
// calling the Phaser Game class with constructor arguments:
// Stage width, height, rendering context (CANVAS, WEBGL, AUTO), HTML container ID  - if empty, game is attached to <body>, object defining the Phaser main game states
var game = new Phaser.Game(800, 600, Phaser.CANVAS, '', {preload: preload, create: create, update: update});
var cursors;
var cat, catcher, cursors, score, scoreTxt, GameOver;
	
function preload(){
	// load your game assets (instance name, path)
	game.load.image('bg', 'images/bg.png');
	game.load.image('catcher', 'images/catcher.png');
	game.load.image('cat', 'images/cat.png');
}
	
function create(){
	// world building / game setup
	game.add.sprite(0, 0, 'bg');

	// attaching the catcher
	catcher = game.add.sprite(game.width / 2, game.height / 2, "catcher");
	catcher.anchor.setTo(0.5,0);
	// ARCADE (arcade) is a Phaser core class
	game.physics.enable(catcher, Phaser.Physics.ARCADE);
	
	// attaching the cat
	cat = game.add.sprite( Math.random() * game.width, Math.random() * game.height, "cat");
	game.physics.enable(cat, Phaser.Physics.ARCADE);
	catcher.anchor.setTo(0.5,0.5);
	// invoke game controls
	cursors = game.input.keyboard.createCursorKeys();

	// the textfield to display score
	// // creating the score
	score = 0;
	// arguments: coordinates, value to display, style)

	scoreText = game.add.text(550, 50, 'Score: 0', styles);
    var styles = { fontSize: '20px', fill: '#000' };
    GameOver = game.add.text(game.width / 2, game.height / 2, '', { fontSize: '40px', fill: 'black' });
	
}
	
function update(){
	// run the game loop
    //if left arrow key is pressed
    if(cursors.left.isDown && catcher.x > 5){
        catcher.x -= 5;
        //scalling 100% to point the element in opposite direction
        catcher.scale.x = 1
	}
    if(cursors.right.isDown && catcher.x < game.width - 5){
        catcher.x += 5;
        catcher.scale.x = -1
	}
   	if(cursors.up.isDown && catcher.y > 5){
        catcher.y -= 5;
    }
    if(cursors.down.isDown && catcher.y < game.height - 5){
        catcher.y += 5;
    }
            
   	game.physics.arcade.overlap(catcher, cat, catHitHandler);
            
        if(score == 10){
            cat.destroy();
            catcher.destroy();
            GameOver.text = 'GAME OVER!';
        }     
}
	
// extra functionality
function catHitHandler(){
	console.log('Cat caught');
    cat.x = game.width * Math.random();
    cat.y = game.height * Math.random();
    score += 1;
    scoreText.text = 'Score: ' + score;
}

</script>
</head>

<body>
</body>
</html>